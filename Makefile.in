CC=@CC@
CFLAGS=@CFLAGS@
BINDIR=@bindir@
LIBS=@LIBS@
DEFS=@DEFINES@ @DEFS@
OBJS=@OBJS@

all: main

build:
	builder

main:	$(OBJS) 
	$(CC) $(CFLAGS) $(LIBS) -o camp $(OBJS)
	@echo "Now, type \"make install\" to install the binary and default configfile." 
	@echo ""
	@echo "-- IMPORTANT! READ THIS ( yeah, you too :) ) --"
	@echo "If NOT doing \"make install\", please create $(HOME)/.camp, and"
	@echo "copy camp.ini to $(HOME)/.camp/camprc, and lirc.ini to $(HOME)/.camp/lircrc."
	@echo "EVEN IF you are doing a \"make install\" you need to copy skins.tar to"
	@echo "$(HOME)/.camp and execute \"cd $(HOME)/.camp ; tar xvf skins.tar\""
	@echo "If you are planning to use a LPT remote control, run \"make rctools\"."
	@echo ""
rctools:
	$(CC) $(CFLAGS) -o testrc testrc.c

install:
	if test -f $(HOME)/.camp; then rm -f $(HOME)/.camp; fi
	if test -f $(HOME)/.camp/camprc; then mv -f $(HOME)/.camp/camprc $(HOME)/.camp/camprc.bak-pre1.5; fi
	./mkinstalldirs $(BINDIR) $(HOME)/.camp
	install -s -m 0755 ./camp     $(BINDIR)
	install    -m 0600 ./camp.ini $(HOME)/.camp/camprc
	install    -m 0600 ./tip.txt  $(HOME)/.camp/tip.txt
	
.c.o:	
	$(CC) $(DEFS) $(CFLAGS) -c $<

clean: 
	rm -f camp *.o *~

distclean: clean
	rm -f config.* Makefile
